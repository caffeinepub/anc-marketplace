{
  "kind": "build_request",
  "title": "Fix Admin Center Backend Connection and Authentication Flow",
  "projectName": "ANC Marketplace",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Fix the Admin Center page backend connection that is stuck on 'Initializing...' and 'Connecting to backend...' after Internet Identity authentication was added",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "It loaded successfully before the security was added",
          "The Admin Center is stuck on 'Initializing...' with a loading spinner saying 'Connecting to backend...'"
        ]
      },
      "acceptanceCriteria": [
        "Admin Center page successfully connects to backend canister after Internet Identity authentication",
        "Loading spinner disappears and dashboard content displays",
        "No 'Initializing...' or 'Connecting to backend...' messages remain visible after successful authentication"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Restore Admin Center dashboard display of account totals showing the total amounts deposited across all user accounts",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Including account totals that were deposited"
        ]
      },
      "acceptanceCriteria": [
        "Dashboard displays aggregate account totals from all registered users",
        "Total deposited amounts are calculated and displayed correctly",
        "Currency formatting is applied consistently (USD format)"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Restore Admin Center dashboard display of deposit methods breakdown showing how funds were deposited (payment method analysis)",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "how they were deposited"
        ]
      },
      "acceptanceCriteria": [
        "Dashboard shows breakdown of deposit methods used by customers",
        "Payment method categories are clearly labeled",
        "Percentages or counts are displayed for each deposit method"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Restore Admin Center dashboard display of complete transaction history records with all transaction details",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "the transaction history record"
        ]
      },
      "acceptanceCriteria": [
        "Complete transaction history is visible in the Admin Center",
        "Transaction records include dates, amounts, status, and user information",
        "Transaction data loads successfully after authentication is complete"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Restore Admin Center dashboard menu options and navigation controls that were working before authentication was added",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "what all the dashboard is supposed to display on opening"
        ]
      },
      "acceptanceCriteria": [
        "All dashboard menu options are visible and functional",
        "Navigation between dashboard sections works correctly",
        "Menu structure matches the pre-authentication implementation"
      ]
    },
    {
      "id": "REQ-6",
      "text": "Ensure the Internet Identity authentication flow properly initializes the backend actor connection for authenticated admin users accessing the Admin Center",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "The authentication implementation is blocking the Admin Center from loading",
          "The authentication layer is blocking the connection between the frontend and backend canister"
        ]
      },
      "acceptanceCriteria": [
        "Authenticated users can successfully establish backend actor connection",
        "Admin role verification completes without blocking dashboard load",
        "Actor initialization errors are handled gracefully with user-friendly messages"
      ]
    }
  ],
  "constraints": [
    "Do not modify the Internet Identity authentication hook implementation (frontend/src/hooks/useInternetIdentity.ts)",
    "Preserve existing admin dashboard tab structure and components",
    "Maintain single-actor backend architecture in backend/main.mo",
    "Do not change the useActor hook interface"
  ],
  "nonGoals": [
    "Adding new authentication providers beyond Internet Identity",
    "Redesigning the Admin Center UI layout or styling",
    "Implementing real-time data updates or WebSocket connections",
    "Adding new admin features beyond restoring existing functionality"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}